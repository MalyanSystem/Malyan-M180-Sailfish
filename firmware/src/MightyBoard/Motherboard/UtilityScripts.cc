/*
 * Copyright 2012 by Alison Leonard <alison@makerbot.com>
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>
 */
 
#include "Interface.hh"
#include <util/delay.h>
 
#include "UtilityScripts.hh"
#include <avr/pgmspace.h>
#include "EepromMap.hh"
#include "Menu_locales.hh"

const static uint16_t Lengths[3]  PROGMEM = { 98, /// Home Axes
					      LEVEL_PLATE_LEN,
					      5741}; /// nozzle (toolhead) calibrate


const static uint8_t NozzleCalibrate[] PROGMEM = { 153,  0,  0,  0,  0,  82,  101,  112,  71,  32,  66,  117,  105,  108,  100,  0,  150,  0,  255,  137,  16,  134,  0,  136,  0,  3,  2,  220,  0,  134,  1,  136,  1,  3,  2,  220,  0,  134,  0,  136,  0,  31,  2,  80,  0,  136,  1,  31,  2,  80,  0,  132,  3,  113,  1,  0,  0,  20,  0,  131,  4,  63,  0,  0,  0,  20,  0,  140,  0,  0,  0,  0,  0,  0,  0,  0,  192,  224,  255,  255,  0,  0,  0,  0,  0,  0,  0,  0,  155,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  128,  62,  0,  0,  24,  0,  0,  160,  64,  128,  2,  131,  4,  119,  1,  0,  0,  20,  0,  144,  31,  140,  130,  50,  0,  0,  65,  25,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  155,  226,  37,  0,  0,  191,  230,  255,  255,  128,  62,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  205,  28,  0,  0,  24,  158,  167,  16,  67,  170,  16,  145,  0,  0,  145,  1,  0,  145,  3,  0,  145,  4,  0,  134,  0,  134,  0,  135,  0,  100,  0,  255,  255,  141,  1,  100,  0,  255,  255,  145,  0,  127,  145,  1,  127,  145,  3,  127,  145,  4,  127,  134,  0,  134,  0,  135,  0,  100,  0,  255,  255,  141,  1,  100,  0,  255,  255,  134,  0,  155,  226,  37,  0,  0,  190,  230,  255,  255,  224,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  128,  62,  0,  0,  24,  51,  51,  27,  65,  128,  2,  140,  226,  37,  0,  0,  191,  230,  255,  255,  224,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  136,  0,  10,  1,  3,  136,  0,  4,  1,  255,  155,  226,  37,  0,  0,  191,  230,  255,  255,  224,  1,  0,  0,  224,  252,  255,  255,  0,  0,  0,  0,  244,  1,  0,  0,  24,  0,  0,  0,  65,  64,  1,  140,  226,  37,  0,  0,  191,  230,  255,  255,  224,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  155,  226,  37,  0,  0,  191,  230,  255,  255,  192,  249,  255,  255,  0,  0,  0,  0,  0,  0,  0,  0,  64,  31,  0,  0,  24,  102,  102,  166,  63,  64,  1,  140,  226,  37,  0,  0,  191,  230,  255,  255,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  150,  1,  255,  134,  0,  155,  190,  230,  255,  255,  35,  234,  255,  255,  0,  1,  0,  0,  206,  255,  255,  255,  0,  0,  0,  0,  105,  14,  0,  0,  24,  154,  64,  47,  67,  0,  10,  155,  191,  230,  255,  255,  35,  234,  255,  255,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  81,  216,  255,  255,  35,  234,  255,  255,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  32,  66,  42,  3,  150,  2,  255,  155,  190,  230,  255,  255,  200,  237,  255,  255,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  253,  13,  0,  0,  24,  142,  5,  37,  66,  0,  10,  155,  191,  230,  255,  255,  200,  237,  255,  255,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  236,  219,  255,  255,  199,  237,  255,  255,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  150,  3,  255,  155,  191,  230,  255,  255,  109,  241,  255,  255,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  191,  230,  255,  255,  109,  241,  255,  255,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  236,  219,  255,  255,  108,  241,  255,  255,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  150,  4,  255,  155,  191,  230,  255,  255,  18,  245,  255,  255,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  190,  230,  255,  255,  17,  245,  255,  255,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  236,  219,  255,  255,  18,  245,  255,  255,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  150,  5,  255,  155,  191,  230,  255,  255,  182,  248,  255,  255,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  191,  230,  255,  255,  183,  248,  255,  255,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  236,  219,  255,  255,  182,  248,  255,  255,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  150,  6,  255,  155,  191,  230,  255,  255,  91,  252,  255,  255,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  191,  230,  255,  255,  91,  252,  255,  255,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  236,  219,  255,  255,  91,  252,  255,  255,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  150,  7,  255,  155,  190,  230,  255,  255,  0,  0,  0,  0,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  191,  230,  255,  255,  0,  0,  0,  0,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  236,  219,  255,  255,  0,  0,  0,  0,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  150,  8,  255,  155,  191,  230,  255,  255,  165,  3,  0,  0,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  191,  230,  255,  255,  165,  3,  0,  0,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  236,  219,  255,  255,  165,  3,  0,  0,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  150,  9,  255,  155,  191,  230,  255,  255,  74,  7,  0,  0,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  190,  230,  255,  255,  73,  7,  0,  0,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  236,  219,  255,  255,  74,  7,  0,  0,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  150,  10,  255,  155,  191,  230,  255,  255,  238,  10,  0,  0,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  191,  230,  255,  255,  239,  10,  0,  0,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  236,  219,  255,  255,  238,  10,  0,  0,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  150,  11,  255,  155,  191,  230,  255,  255,  148,  14,  0,  0,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  191,  230,  255,  255,  147,  14,  0,  0,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  236,  219,  255,  255,  147,  14,  0,  0,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  150,  12,  255,  155,  190,  230,  255,  255,  57,  18,  0,  0,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  191,  230,  255,  255,  56,  18,  0,  0,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  236,  219,  255,  255,  56,  18,  0,  0,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  150,  13,  255,  155,  191,  230,  255,  255,  221,  21,  0,  0,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  191,  230,  255,  255,  221,  21,  0,  0,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  236,  219,  255,  255,  221,  21,  0,  0,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  150,  14,  255,  155,  246,  244,  255,  255,  201,  248,  255,  255,  160,  5,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  239,  10,  0,  0,  24,  74,  186,  212,  66,  0,  10,  155,  245,  244,  255,  255,  201,  248,  255,  255,  0,  1,  0,  0,  206,  255,  255,  255,  0,  0,  0,  0,  170,  41,  0,  0,  24,  164,  112,  61,  63,  170,  1,  155,  246,  244,  255,  255,  200,  248,  255,  255,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  154,  2,  0,  0,  24,  154,  153,  153,  62,  170,  1,  155,  246,  244,  255,  255,  56,  7,  0,  0,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  32,  66,  42,  3,  150,  20,  255,  155,  155,  248,  255,  255,  200,  248,  255,  255,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  253,  13,  0,  0,  24,  142,  5,  37,  66,  0,  10,  155,  154,  248,  255,  255,  201,  248,  255,  255,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  155,  248,  255,  255,  156,  3,  0,  0,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  63,  252,  255,  255,  201,  248,  255,  255,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  64,  252,  255,  255,  200,  248,  255,  255,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  63,  252,  255,  255,  156,  3,  0,  0,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  228,  255,  255,  255,  201,  248,  255,  255,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  229,  255,  255,  255,  201,  248,  255,  255,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  228,  255,  255,  255,  155,  3,  0,  0,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  137,  3,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  137,  3,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  137,  3,  0,  0,  155,  3,  0,  0,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  46,  7,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  46,  7,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  46,  7,  0,  0,  156,  3,  0,  0,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  211,  10,  0,  0,  200,  248,  255,  255,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  211,  10,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  211,  10,  0,  0,  156,  3,  0,  0,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  119,  14,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  120,  14,  0,  0,  200,  248,  255,  255,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  120,  14,  0,  0,  156,  3,  0,  0,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  28,  18,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  29,  18,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  28,  18,  0,  0,  155,  3,  0,  0,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  193,  21,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  194,  21,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  193,  21,  0,  0,  155,  3,  0,  0,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  102,  25,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  102,  25,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  102,  25,  0,  0,  156,  3,  0,  0,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  11,  29,  0,  0,  200,  248,  255,  255,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  11,  29,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  11,  29,  0,  0,  156,  3,  0,  0,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  150,  30,  255,  155,  176,  32,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  173,  13,  0,  0,  24,  128,  60,  253,  65,  0,  10,  155,  176,  32,  0,  0,  200,  248,  255,  255,  0,  1,  0,  0,  226,  255,  255,  255,  0,  0,  0,  0,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  176,  32,  0,  0,  156,  3,  0,  0,  0,  1,  0,  0,  142,  254,  255,  255,  0,  0,  0,  0,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  150,  40,  255,  155,  176,  32,  0,  0,  156,  3,  0,  0,  0,  1,  0,  0,  50,  0,  0,  0,  0,  0,  0,  0,  50,  5,  0,  0,  24,  0,  0,  0,  63,  83,  3,  137,  8,  134,  1,  137,  24,  155,  190,  230,  255,  255,  90,  234,  255,  255,  160,  5,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  157,  6,  0,  0,  24,  164,  49,  47,  67,  0,  5,  155,  191,  230,  255,  255,  90,  234,  255,  255,  160,  5,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  50,  5,  0,  0,  24,  154,  153,  153,  62,  83,  3,  137,  144,  150,  50,  255,  155,  191,  230,  255,  255,  91,  234,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  236,  255,  255,  255,  128,  62,  0,  0,  24,  164,  112,  61,  63,  128,  2,  155,  191,  230,  255,  255,  90,  234,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  231,  3,  0,  0,  24,  154,  153,  153,  62,  128,  2,  155,  45,  245,  255,  255,  91,  234,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  32,  66,  42,  3,  150,  51,  255,  155,  191,  230,  255,  255,  246,  237,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  255,  13,  0,  0,  24,  154,  236,  36,  66,  0,  10,  155,  191,  230,  255,  255,  246,  237,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  145,  241,  255,  255,  246,  237,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  191,  230,  255,  255,  145,  241,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  191,  230,  255,  255,  146,  241,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  145,  241,  255,  255,  145,  241,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  191,  230,  255,  255,  46,  245,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  191,  230,  255,  255,  45,  245,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  146,  241,  255,  255,  45,  245,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  190,  230,  255,  255,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  191,  230,  255,  255,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  146,  241,  255,  255,  200,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  191,  230,  255,  255,  101,  252,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  190,  230,  255,  255,  100,  252,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  146,  241,  255,  255,  101,  252,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  150,  60,  255,  155,  191,  230,  255,  255,  0,  0,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  191,  230,  255,  255,  0,  0,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  145,  241,  255,  255,  0,  0,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  191,  230,  255,  255,  155,  3,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  191,  230,  255,  255,  156,  3,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  145,  241,  255,  255,  155,  3,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  191,  230,  255,  255,  56,  7,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  191,  230,  255,  255,  55,  7,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  146,  241,  255,  255,  55,  7,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  190,  230,  255,  255,  211,  10,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  191,  230,  255,  255,  211,  10,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  146,  241,  255,  255,  210,  10,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  150,  70,  255,  155,  191,  230,  255,  255,  111,  14,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  190,  230,  255,  255,  110,  14,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  146,  241,  255,  255,  111,  14,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  191,  230,  255,  255,  10,  18,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  191,  230,  255,  255,  10,  18,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  145,  241,  255,  255,  10,  18,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  191,  230,  255,  255,  165,  21,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  191,  230,  255,  255,  166,  21,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  145,  241,  255,  255,  165,  21,  0,  0,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  150,  80,  255,  155,  46,  245,  255,  255,  246,  237,  255,  255,  160,  5,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  95,  14,  0,  0,  24,  132,  233,  220,  66,  0,  10,  155,  45,  245,  255,  255,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  206,  255,  255,  255,  103,  2,  0,  0,  24,  176,  18,  240,  65,  170,  1,  155,  45,  245,  255,  255,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  154,  2,  0,  0,  24,  154,  153,  153,  62,  170,  1,  155,  45,  245,  255,  255,  246,  237,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  201,  248,  255,  255,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  201,  248,  255,  255,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  201,  248,  255,  255,  246,  237,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  100,  252,  255,  255,  200,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  100,  252,  255,  255,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  101,  252,  255,  255,  246,  237,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  150,  90,  255,  155,  0,  0,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  0,  0,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  0,  0,  0,  0,  246,  237,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  155,  3,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  156,  3,  0,  0,  200,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  156,  3,  0,  0,  246,  237,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  55,  7,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  55,  7,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  55,  7,  0,  0,  246,  237,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  211,  10,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  211,  10,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  211,  10,  0,  0,  246,  237,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  110,  14,  0,  0,  200,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  110,  14,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  111,  14,  0,  0,  246,  237,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  150,  91,  255,  155,  10,  18,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  10,  18,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  10,  18,  0,  0,  246,  237,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  165,  21,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  166,  21,  0,  0,  200,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  166,  21,  0,  0,  246,  237,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  65,  25,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  65,  25,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  65,  25,  0,  0,  246,  237,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  150,  95,  255,  155,  221,  28,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  221,  28,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  221,  28,  0,  0,  246,  237,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  155,  120,  32,  0,  0,  200,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  50,  0,  0,  0,  177,  13,  0,  0,  24,  114,  251,  252,  65,  0,  10,  155,  120,  32,  0,  0,  201,  248,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  226,  255,  255,  255,  106,  10,  0,  0,  24,  154,  153,  153,  62,  170,  6,  155,  121,  32,  0,  0,  246,  237,  255,  255,  0,  1,  0,  0,  0,  0,  0,  0,  142,  254,  255,  255,  145,  4,  0,  0,  24,  0,  0,  240,  65,  42,  3,  150,  99,  255,  134,  0,  136,  0,  3,  2,  0,  0,  134,  1,  136,  1,  3,  2,  0,  0,  134,  0,  136,  0,  31,  2,  0,  0,  136,  1,  31,  2,  0,  0,  155,  120,  32,  0,  0,  246,  237,  255,  255,  128,  187,  0,  0,  0,  0,  0,  0,  52,  253,  255,  255,  170,  41,  0,  0,  24,  82,  184,  238,  65,  170,  1,  132,  3,  113,  1,  0,  0,  20,  0,  136,  0,  10,  1,  2,  136,  0,  4,  1,  255,  137,  31,  150,  100,  255,  154,  0,  137,  31,  137,  31 };

LEVEL_PLATE

namespace utility {
	 
volatile bool is_playing;
int build_index = 0;
int build_length = 0;
const uint8_t * buildFile;
	  
/// returns true if script is running
bool isPlaying() {
	return is_playing;
}

void reset() {
	build_index = 0;
	build_length = 0;
	is_playing = false;
}
 
/// returns true if more bytes are available in the script
bool playbackHasNext() {
	return (build_index < build_length);
}
 
/// gets next byte in script
uint8_t playbackNext() {
	uint8_t byte;

	if ( build_index < build_length ) { 
		byte = pgm_read_byte(buildFile + build_index++);
		return byte;
	}
	else 
		return 0;
}
 
/// begin buffer playback
bool startPlayback(uint8_t build) {
	is_playing = true;
	build_index = 0;

	// get build file
	switch (build) {
	case HOME_AXES:
		buildFile = LevelPlate; // we just used the first 98 bytes
		break;
	case LEVEL_PLATE_STARTUP:
		buildFile = LevelPlate;
		break;
#if !defined(SINGLE_EXTRUDER) && defined(NOZZLE_CALIBRATE_SCRIPT)
	case TOOLHEAD_CALIBRATE:
		buildFile = NozzleCalibrate;
		break;
#endif
	default:
		return false;
	}
	
	// get build length
	build_length = pgm_read_word(Lengths + build);

	return true;
}

/// updates state to finished playback
void finishPlayback() {
	is_playing = false;	
}

};

